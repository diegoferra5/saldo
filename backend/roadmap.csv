Phase,Milestone ID,Milestone Name,Status,Priority,Hours,Complexity,Description,Tasks,Acceptance Criteria,Files to Create,Files to Modify,Testing Checklist
Phase 1,1.1,Transactions Router,Pending,Critical,4,Medium,"Implementar endpoints completos para consulta y edición de transacciones con validaciones robustas","1. GET /api/transactions/ - Lista paginada con filtros (account_id, start_date, end_date, movement_type, needs_review, limit=50 max=200, offset>=0)
2. GET /api/transactions/stats - Estadísticas por tipo (CARGO/ABONO/UNKNOWN)
3. GET /api/transactions/{id} - Detalle de transacción con ownership check
4. PATCH /api/transactions/{id} - Actualizar clasificación con reglas automáticas (movement_type != UNKNOWN => needs_review=False)","✅ 4 endpoints implementados
✅ Validaciones: limit (max 200), offset>=0, start_date<=end_date
✅ ORDER BY transaction_date DESC
✅ Reglas automáticas needs_review
✅ Ownership checks (404 not 403)
✅ Partial update real
✅ Edge cases testeados",backend/app/routes/transactions.py,backend/app/main.py (add router),"Happy Path: GET sin filtros | GET con limit=10 | GET con movement_type=CARGO | GET stats | GET by ID | PATCH update type
Edge Cases: limit=5000 caps to 200 | start_date>end_date => 422 | GET ID otro user => 404 | PATCH invalid type => 422
Security: JWT required | Ownership checks | 404 not 403"
Phase 1,1.2,Accounts Router,Pending,High,4,Medium,"CRUD completo de cuentas bancarias con soft delete y validaciones de unicidad","1. GET /api/accounts/ - Lista con filtros (bank_name, account_type, is_active)
2. POST /api/accounts/ - Crear cuenta (get_or_create pattern, unicidad por user_id+bank_name+account_type)
3. GET /api/accounts/{id} - Detalle con ownership check
4. PATCH /api/accounts/{id} - Actualizar display_name/is_active
5. DELETE /api/accounts/{id} - Soft delete idempotente (is_active=False)","✅ 5 endpoints implementados
✅ Schemas creados (AccountResponse, AccountCreate, AccountUpdate)
✅ Unicidad: (user_id, bank_name, account_type)
✅ bank_name normalizado a uppercase
✅ POST usa get_or_create (no duplicados)
✅ DELETE soft delete idempotente
✅ Ownership checks","backend/app/schemas/account.py
backend/app/routes/accounts.py",backend/app/main.py (add router),"Happy Path: POST crea cuenta | POST duplicate => existing | GET lista | GET con is_active=true | PATCH display_name | DELETE soft delete
Edge Cases: POST sin bank_name => 422 | DELETE inactive => 204 OK | DELETE con transactions => 204 (preserva data)
Security: JWT required | Ownership checks | Cannot access other users accounts"
Phase 1,1.3,PDF Cleanup + Logger,Pending,Medium,0.5,Low,"Implementar limpieza automática de PDFs después de procesamiento exitoso con logging profesional","1. Configurar logging en main.py (basicConfig, format, level=INFO)
2. Agregar logger en statement_service.py
3. Reemplazar print() con logger.info()/warning()
4. En process_statement(): delete PDF si parsing_status=success
5. Catch exceptions y log warning (no fallar statement)","✅ Logging configurado en main.py
✅ All print() replaced with logger
✅ PDFs deleted after success
✅ Delete failures => warning only
✅ Statement no falla si delete falla",No crear archivos nuevos,"backend/app/main.py (configure logging)
backend/app/services/statement_service.py (add logger, delete PDF)","Upload+process statement | Verify PDF deleted from /tmp | Verify statement exists in DB | Check logs show success | Simulate delete fail => warning only"
Phase 1.5,1.5a,Error Handling Estandarizado,Pending,Medium,1,Low,"Crear respuestas de error consistentes en toda la API con códigos machine-readable","1. Crear app/core/errors.py con ErrorResponse schema
2. Definir error codes (INVALID_DATE_RANGE, LIMIT_EXCEEDED, DUPLICATE_STATEMENT, etc)
3. Actualizar routers para usar ErrorResponse en HTTPException
4. Testing en Swagger","✅ ErrorResponse schema creado
✅ Error codes documentados
✅ All routers use ErrorResponse
✅ Tested in Swagger",backend/app/core/errors.py,All routers to use ErrorResponse format,"Test endpoints with invalid data | Verify error format consistent | Check error codes are machine-readable | Frontend can use codes for i18n"
Phase 1.5,1.5b,Seed Data Script,Pending,High,2,Medium,"Script para generar datos de prueba realistas para acelerar desarrollo y demos","1. Instalar Faker (pip install Faker)
2. Crear scripts/seed_demo_data.py
3. Generar 1 user (demo@saldo.com / Demo1234!)
4. Generar 2 accounts (BBVA Debit, Santander Credit)
5. Generar 50 transactions (20 CARGO, 25 ABONO, 5 UNKNOWN) con descripciones realistas
6. Make script idempotent
7. Documentar en README","✅ Script runs without errors
✅ Creates demo user with known credentials
✅ Creates 2 accounts (different banks)
✅ Creates 50 realistic transactions with Faker
✅ Distributed across CARGO/ABONO/UNKNOWN
✅ Script is idempotent
✅ Documented in README",backend/scripts/seed_demo_data.py,backend/README.md (add usage docs),"Run script | Verify user created | Verify accounts created | Verify transactions created | Run again => no duplicates | Login with demo@saldo.com works | Transactions have realistic descriptions"
Phase 2,2.1,Automated Testing,Pending,Medium,6,Medium,"Tests automatizados con pytest para prevenir regresiones","1. Install pytest, pytest-asyncio, httpx
2. Create tests/conftest.py (fixtures)
3. Create tests/test_auth.py (register, login, /me)
4. Create tests/test_statements.py (upload, process, dedupe)
5. Create tests/test_transactions.py (CRUD, filters, stats)
6. Create tests/test_accounts.py (CRUD, soft delete)
7. Run: pytest tests/ -v --cov=app
8. Target: 60%+ coverage overall","✅ Tests run without errors
✅ Coverage: Auth 80%+, Statements 70%+, Transactions 60%+, Accounts 60%+
✅ All edge cases covered
✅ Security tests (auth, ownership)
✅ Integration tests (full flow)","backend/tests/conftest.py
backend/tests/test_auth.py
backend/tests/test_statements.py
backend/tests/test_transactions.py
backend/tests/test_accounts.py",backend/requirements.txt (add test deps),"pytest tests/ -v | All tests pass | Coverage report shows 60%+ | Tests catch regressions | CI/CD ready"
Phase 2,2.2,Documentation,Pending,Low,2,Low,"Documentación completa para developers y onboarding","1. Update README.md (quickstart, setup, demo flow)
2. Create CONTRIBUTING.md (git workflow, commits)
3. Create docs/API.md (endpoint docs)
4. Create docs/ARCHITECTURE.md (system design)
5. Create .github/pull_request_template.md
6. Add examples to Swagger docstrings","✅ README has quickstart (5 min setup)
✅ Demo flow documented
✅ CONTRIBUTING.md with git workflow
✅ API docs complete
✅ PR template created
✅ Swagger has examples",".github/pull_request_template.md
docs/API.md
docs/ARCHITECTURE.md
CONTRIBUTING.md","backend/README.md
Swagger docstrings in routers","New developer can setup in <10 min | Demo flow is clear | PR template used | Swagger examples helpful"
Phase 3,3.1,Security Hardening,Pending,High,4,Medium,"Preparar seguridad para producción","1. Add rate limiting (slowapi)
2. Review input validation (Pydantic)
3. Verify SQL injection prevention (SQLAlchemy)
4. Configure CORS properly
5. Ensure secrets in env vars
6. Force HTTPS
7. Add security headers (HSTS, CSP)","✅ Rate limiting active
✅ Input validation exhaustive
✅ SQL injection prevented
✅ CORS configured
✅ No hardcoded secrets
✅ HTTPS enforced
✅ Security headers set",No new files,"backend/app/main.py (add security middleware)
backend/requirements.txt (add slowapi)","Test rate limiting | Verify CORS | Check security headers | Scan for hardcoded secrets | SQL injection tests"
Phase 3,3.2,Deployment Setup,Pending,High,4,Medium,"Deploy a producción en Railway/Render","1. Create Dockerfile
2. Create railway.json or render.yaml
3. Configure env vars in platform
4. Setup database migrations (Alembic)
5. Create health check endpoint (GET /health)
6. Configure monitoring/logging
7. Test in staging
8. Deploy to production
9. Verify endpoints work","✅ Dockerfile created
✅ Platform config done
✅ Env vars configured
✅ Migrations working
✅ Health check endpoint
✅ Monitoring active
✅ Deployed successfully
✅ API publicly accessible","Dockerfile
railway.json or render.yaml
backend/app/routes/health.py",backend/app/main.py (add health router),"Build Docker image | Deploy to staging | Run migrations | Test all endpoints | Monitor logs | Deploy to prod | Smoke test prod API | Share public URL"
